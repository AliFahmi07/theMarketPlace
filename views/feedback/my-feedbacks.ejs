<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/stylesheets/style.css" />
  <title>Feedback</title>
</head>
<body class="review-page">

  <%- include('../partials/_navbar.ejs') %>

  <h1 class="reviews-title">All Your Feedbacks</h1>

  <div class="reviews-grid">
  <% reviews.forEach(r => { %>

    <div class="review-card">
      <% if (editingId && editingId === r._id.toString()) { %>

      <form action="/feedback/userFeedback/edit?_method=PUT" method="POST">
        <input type="hidden" name="feedbackId" value="<%=r._id%>">

      <label>Comment:</label>
      <input type="text" name="comment" value="<%=r.comment%>">

      <label>Rating:</label>
      <input type="number" name="rating" value="<%=r.rating%>">

      <button class="btn-save" type="submit">Save</button>

      </form>

      <% } else { %>


<p>Seller: <%= r.seller.username ? r.seller.username : 'Unknown' %></p>
<p>Comment: <%= r.comment %> </p>
<p>‚≠ê: <%= r.rating %> </p>
<p>Date: <%= r.createdAt.toLocaleString()%></p>

<a class="btn-edits btn-full" href="/feedback/userFeedback/edit/<%=r._id%>">Edit</a>

        <form class="btn-full" action="/feedback/userFeedback/delete/<%= r._id %>?_method=DELETE" method="POST">
  <button class="btn-delete" type="submit">Delete</button>
</form>


        <% } %>

      </div>

      <% }) %>

  </div>
</body>
</html>
